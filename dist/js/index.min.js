!function i(r,o,l){function d(e,t){if(!o[e]){if(!r[e]){var s="function"==typeof require&&require;if(!t&&s)return s(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=o[e]={exports:{}};r[e][0].call(a.exports,function(t){return d(r[e][1][t]||t)},a,a.exports,i,r,o,l)}return o[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)d(l[t]);return d}({1:[function(t,e,s){"use strict";function n(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(s,"__esModule",{value:!0});var a=(function(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}(i,[{key:"init",value:function(){var e=this;this.getStations(function(t){t.forEach(function(t){e.stationNames.push(t.stationName)})}),this.addListeners()}},{key:"addListeners",value:function(){var a=this;this.app.find(".get-delays").click(function(t){t.preventDefault(),a.runApp()}),$(document).on("keydown",function(t){39==t.which&&a.runApp()}),this.inputs.keyup(function(t){var e=a;a.suggestionLists.html("");var s=t.currentTarget.value,n="from"===t.currentTarget.id?0:1;""!=s?a.suggestionLists.eq(n).addClass("show-suggestions"):a.suggestionLists.eq(n).removeClass("show-suggestions"),a.stationNames.filter(function(t){return t.toUpperCase().startsWith(s.toUpperCase())}).slice(0,3).forEach(function(t){var e=$("<li></li>");e.text(t),a.suggestionLists.eq(n).append(e)}),a.suggestionLists.find("li").click(function(){var t=$(this).text();$(this).closest(".form-input").find("input").val(t),e.suggestionLists.eq(n).html(""),e.suggestionLists.eq(n).removeClass("show-suggestions")})})}},{key:"runApp",value:function(){var e=this,t=this.app.find("#from").val(),s=this.app.find("#to").val();this.getDelays(t,s,function(t){e.renderResults(t,function(){$(".loading-container").addClass("loading"),setTimeout(function(){$(".loading-container").removeClass("loading"),e.animateForward()},e.loadDuration)})})}},{key:"getDelays",value:function(t,e,s){var n=new XMLHttpRequest;n.open("GET",this.baseURL+"/delays/"+t+"/to/"+e+"/20?accessToken="+this.regAccessToken,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status&&n.responseText){var t=JSON.parse(n.response);s&&s(t)}500==n.status&&alert("invalid station input!")},n.send()}},{key:"getStations",value:function(e){var s=new XMLHttpRequest;s.open("GET",this.baseURL+"/crs/?accessToken="+this.regAccessToken,!0),s.onreadystatechange=function(){if(4==s.readyState&&200==s.status&&s.responseText){var t=JSON.parse(s.response);e&&e(t)}},s.send()}},{key:"animateForward",value:function(){this.app.find("form").addClass("slide-right"),this.app.find("#results").addClass("show-results")}},{key:"animateBackward",value:function(){this.app.find("#results").html(""),this.app.find("#results").removeClass("show-results"),this.app.find("form").removeClass("slide-right")}},{key:"renderResults",value:function(t,e){var s=this;this.app.find("#results").html("");var n=t;if(0<n.delayedTrains.length){var i="";n.delayedTrains.forEach(function(t){var e=void 0,s=void 0,n=void 0;t.isCancelled?s=null===t.cancelReason?"No reason provided.":t.cancelReason+".":(n="Delayed"===t.etd?"No time provided.":t.etd,e=null===t.delayReason?"No reason provided.":t.delayReason+".");var a="\n\t\t\t\t\n\t\t\t\t<tr>\n\t\t\t\t\t<td>"+t.std+'</td>\n\t\t\t\t\t<td class="operator">'+t.operator+'</td>\n\t\t\t\t\t<td class="'+(t.isCancelled?"cancelled":"delayed")+'">'+(t.isCancelled?"Cancelled":"Delayed")+"</td>\n\t\t\t\t\t<td>"+(t.isCancelled?"N/A":n)+'</td>\n\t\t\t\t\t<td class="reason">'+(t.isCancelled?s:e)+"</td>\n\t\t\t\t</tr> ";i+=a});var a='\n\n\t\t\t<div class="results-header">\n\t\t\t\t<h2>There '+(1===n.delayedTrains.length?"is":"are")+" currently <b>"+n.delayedTrains.length+"</b> "+(1===n.delayedTrains.length?"issue":"issues")+' with your selected route.</h2>\n\t\t\t</div>\n\n\t\t\t<div class="results-body">\n\t\t\t\t<table>\n\t\t\t\t\t<tr class="table-header">\n\t\t\t\t\t\t<th>Normally Departs</th>\n\t\t\t\t\t\t<th>Operator</th>\n\t\t\t\t\t\t<th>Status</th>\n\t\t\t\t\t\t<th>ETA @ '+n.locationName+"</th>\n\t\t\t\t\t\t<th>Reason</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t"+i+'\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<div class="go-back">\n\t\t\t\t<i class="fas fa-long-arrow-alt-left"></i>\n\t\t\t\t<span>back</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t';this.app.find("#results").removeClass("no-delays"),this.app.find("#results").html(a)}else{var r='\n\n\t\t\t<div class="results-header">\n\t\t\t\t<h2>There are currently no delays between '+n.locationName+" and "+n.filterLocationName+'</h2>\n\t\t\t</div>\n\n\t\t\t<div class="go-back">\n\t\t\t\t<i class="fas fa-long-arrow-alt-left"></i>\n\t\t\t\t<span>back</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t';this.app.find("#results").addClass("no-delays"),this.app.find("#results").html(r)}this.app.find(".go-back").click(function(){s.app.find("#results").html(""),s.animateBackward()}),e&&e()}}]),i);function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.app=$("#app"),this.inputs=this.app.find("input"),this.baseURL="https://huxley.apphb.com",this.suggestionLists=this.app.find(".suggestion-list"),this.regAccessToken="d683dbbd-129a-40c7-92b8-3c74f2f012e4",this.loadDuration=1500,this.stationNames=[]}s.default=a},{}],2:[function(t,e,s){"use strict";var n,a=t("./App"),i=(n=a)&&n.__esModule?n:{default:n};$(document).ready(function(){(new i.default).init()})},{"./App":1}]},{},[2]);
//# sourceMappingURL=index.min.js.map
