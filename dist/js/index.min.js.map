{"version":3,"sources":["index.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","App","Constructor","protoProps","staticProps","prototype","_createClass","this","addListeners","_this","app","find","click","preventDefault","from","val","to","isIntervalActive","$","addClass","queryInterval","setInterval","getDelays","data","renderResults","removeClass","animateForward","interval","document","on","which","iteration","callback","request","XMLHttpRequest","that","open","baseURL","regAccessToken","onreadystatechange","readyState","status","responseText","response","JSON","parse","clearInterval","send","html","_this2","results","delayedTrains","rows","forEach","train","delayReason","cancelReason","estimatedDeparture","isCancelled","etd","row","std","operator","displayHTML","locationName","_displayHTML","filterLocationName","animateBackward","instance","TypeError","_classCallCheck","default","2","obj","_App","_App2","__esModule","ready","init","./App"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// JavaScript Document\n\nvar App = function () {\n\tfunction App() {\n\t\t_classCallCheck(this, App);\n\n\t\tthis.app = $('#app');\n\t\tthis.baseURL = \"https://huxley.apphb.com\";\n\t\tthis.regAccessToken = \"d683dbbd-129a-40c7-92b8-3c74f2f012e4\";\n\t\tthis.isIntervalActive = false;\n\t\tthis.interval = 3000;\n\t}\n\n\t_createClass(App, [{\n\t\tkey: \"init\",\n\t\tvalue: function init() {\n\n\t\t\tthis.addListeners();\n\t\t}\n\t}, {\n\t\tkey: \"addListeners\",\n\t\tvalue: function addListeners() {\n\t\t\tvar _this = this;\n\n\t\t\tthis.app.find('.get-delays').click(function (e) {\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tvar iteration = 1;\n\t\t\t\tvar from = _this.app.find('#from').val();\n\t\t\t\tvar to = _this.app.find('#to').val();\n\n\t\t\t\t_this.isIntervalActive = true;\n\t\t\t\t$('.loading-container').addClass('loading');\n\n\t\t\t\t_this.queryInterval = setInterval(function () {\n\n\t\t\t\t\t_this.getDelays(from, to, function (data) {\n\n\t\t\t\t\t\t_this.renderResults(data, function () {\n\n\t\t\t\t\t\t\tif (_this.isIntervalActive) {\n\n\t\t\t\t\t\t\t\t$('.loading-container').removeClass('loading');\n\t\t\t\t\t\t\t\t_this.animateForward();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\titeration++;\n\t\t\t\t\t});\n\t\t\t\t}, _this.interval);\n\t\t\t});\n\n\t\t\t$(document).on('keydown', function (e) {\n\n\t\t\t\tif (e.which == 39) {\n\n\t\t\t\t\tvar iteration = 1;\n\t\t\t\t\tvar from = _this.app.find('#from').val();\n\t\t\t\t\tvar to = _this.app.find('#to').val();\n\n\t\t\t\t\t_this.isIntervalActive = true;\n\t\t\t\t\t$('.loading-container').addClass('loading');\n\n\t\t\t\t\t_this.queryInterval = setInterval(function () {\n\n\t\t\t\t\t\t_this.getDelays(from, to, function (data) {\n\n\t\t\t\t\t\t\t_this.renderResults(data, function () {\n\n\t\t\t\t\t\t\t\tif (_this.isIntervalActive && iteration === 1) {\n\n\t\t\t\t\t\t\t\t\t$('.loading-container').removeClass('loading');\n\t\t\t\t\t\t\t\t\t_this.animateForward();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\titeration++;\n\t\t\t\t\t\t});\n\t\t\t\t\t}, _this.interval);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"getDelays\",\n\t\tvalue: function getDelays(from, to, callback) {\n\n\t\t\tvar request = new XMLHttpRequest();\n\t\t\tvar that = this;\n\n\t\t\trequest.open(\"GET\", this.baseURL + \"/delays/\" + from + \"/to/\" + to + \"/20?accessToken=\" + this.regAccessToken, true);\n\n\t\t\trequest.onreadystatechange = function () {\n\n\t\t\t\tif (request.readyState == 4 && request.status == 200) {\n\n\t\t\t\t\tif (request.responseText) {\n\n\t\t\t\t\t\tvar response = JSON.parse(request.response);\n\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tcallback(response);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (request.status == 500) {\n\n\t\t\t\t\tclearInterval(that.queryInterval);\n\t\t\t\t\tthat.isIntervalActive = false;\n\t\t\t\t\t$('.loading-container').removeClass('loading');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\trequest.send();\n\t\t}\n\t}, {\n\t\tkey: \"animateForward\",\n\t\tvalue: function animateForward() {\n\t\t\tthis.app.find('form').addClass('slide-right');\n\t\t\tthis.app.find('#results').addClass('show-results');\n\t\t}\n\t}, {\n\t\tkey: \"animateBackward\",\n\t\tvalue: function animateBackward() {\n\t\t\tthis.app.find('#results').html(\"\");\n\t\t\tthis.app.find('#results').removeClass('show-results');\n\t\t\tthis.app.find('form').removeClass('slide-right');\n\t\t}\n\t}, {\n\t\tkey: \"renderResults\",\n\t\tvalue: function renderResults(data, callback) {\n\t\t\tvar _this2 = this;\n\n\t\t\tthis.app.find('#results').html(\"\");\n\n\t\t\tvar results = data;\n\n\t\t\tif (results.delayedTrains.length > 0) {\n\n\t\t\t\tvar rows = '';\n\n\t\t\t\tresults.delayedTrains.forEach(function (train) {\n\n\t\t\t\t\tvar delayReason = void 0;\n\t\t\t\t\tvar cancelReason = void 0;\n\t\t\t\t\tvar estimatedDeparture = void 0;\n\n\t\t\t\t\tif (train.isCancelled) {\n\n\t\t\t\t\t\tcancelReason = train.cancelReason === null ? 'No reason provided.' : train.cancelReason + '.';\n\t\t\t\t\t} else {\n\t\t\t\t\t\testimatedDeparture = train.etd === \"Delayed\" ? 'No time provided.' : train.etd;\n\t\t\t\t\t\tdelayReason = train.delayReason === null ? 'No reason provided.' : train.delayReason + '.';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar row = \"\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t<td>\" + train.std + \"</td>\\n\\t\\t\\t\\t\\t<td class=\\\"operator\\\">\" + train.operator + \"</td>\\n\\t\\t\\t\\t\\t<td class=\\\"\" + (train.isCancelled ? 'cancelled' : 'delayed') + \"\\\">\" + (train.isCancelled ? 'Cancelled' : 'Delayed') + \"</td>\\n\\t\\t\\t\\t\\t<td>\" + (train.isCancelled ? 'N/A' : estimatedDeparture) + \"</td>\\n\\t\\t\\t\\t\\t<td class=\\\"reason\\\">\" + (train.isCancelled ? cancelReason : delayReason) + \"</td>\\n\\t\\t\\t\\t</tr> \";\n\n\t\t\t\t\trows += row;\n\t\t\t\t});\n\n\t\t\t\tvar displayHTML = \"\\n\\n\\t\\t\\t<div class=\\\"results-header\\\">\\n\\t\\t\\t\\t<h2>There \" + (results.delayedTrains.length === 1 ? 'is' : 'are') + \" currently <b>\" + results.delayedTrains.length + \"</b> \" + (results.delayedTrains.length === 1 ? 'issue' : 'issues') + \" with your selected route.</h2>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<div class=\\\"results-body\\\">\\n\\t\\t\\t\\t<table>\\n\\t\\t\\t\\t\\t<tr class=\\\"table-header\\\">\\n\\t\\t\\t\\t\\t\\t<th>Normally Departs</th>\\n\\t\\t\\t\\t\\t\\t<th>Operator</th>\\n\\t\\t\\t\\t\\t\\t<th>Status</th>\\n\\t\\t\\t\\t\\t\\t<th>ETA @ \" + results.locationName + \"</th>\\n\\t\\t\\t\\t\\t\\t<th>Reason</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t\\t\" + rows + \"\\n\\t\\t\\t\\t</table>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<div class=\\\"go-back\\\">\\n\\t\\t\\t\\t<i class=\\\"fas fa-long-arrow-alt-left\\\"></i>\\n\\t\\t\\t\\t<span>back</span>\\n\\t\\t\\t</div>\\n\\t\\t\\t\\n\\t\\t\\t\";\n\n\t\t\t\tthis.app.find('#results').removeClass('no-delays');\n\t\t\t\tthis.app.find('#results').html(displayHTML);\n\t\t\t} else {\n\n\t\t\t\tvar _displayHTML = \"\\n\\n\\t\\t\\t<div class=\\\"results-header\\\">\\n\\t\\t\\t\\t<h2>There are currently no delays between \" + results.locationName + \" and \" + results.filterLocationName + \"</h2>\\n\\t\\t\\t</div>\\n\\n\\t\\t\\t<div class=\\\"go-back\\\">\\n\\t\\t\\t\\t<i class=\\\"fas fa-long-arrow-alt-left\\\"></i>\\n\\t\\t\\t\\t<span>back</span>\\n\\t\\t\\t</div>\\n\\t\\t\\t\\n\\t\\t\\t\";\n\n\t\t\t\tthis.app.find('#results').addClass('no-delays');\n\t\t\t\tthis.app.find('#results').html(_displayHTML);\n\t\t\t}\n\n\t\t\tthis.app.find('.go-back').click(function () {\n\n\t\t\t\t_this2.app.find('#results').html(\"\");\n\t\t\t\t_this2.animateBackward();\n\t\t\t\t_this2.isIntervalActive = false;\n\t\t\t\tclearInterval(_this2.queryInterval);\n\t\t\t});\n\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t};\n\t\t}\n\t}]);\n\n\treturn App;\n}();\n\nexports.default = App;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar _App = require('./App');\n\nvar _App2 = _interopRequireDefault(_App);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n$(document).ready(function () {\n\n\tvar myApp = new _App2.default();\n\tmyApp.init();\n}); // JavaScript Document\n\n},{\"./App\":1}]},{},[2]);\n"]}